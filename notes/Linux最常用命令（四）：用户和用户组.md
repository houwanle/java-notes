# Linux最常用命令（四）：用户和用户组

用户是指在一个操作系统中，一系列权限的集合体，操作人员通过用户名和口令可以在系统中执行某一些被允许的操作。不同的用户可以具有不同的权限。Linux操作系统中每个用户都具有唯一标识UID，当使用命令创建用户时，如果不指定用户的UID，则系统将自动为其分配UID。

用户组就是具有相同特征的用户的集合体，在Linux系统中，每一个用户都属于至少一个用户组。Linux 操作系统中每个用户分组都具有唯一标识 GID ，当使用命令创建用户组时，如果不指定用户组的 GID，则系统将自动为其分配 GID。当使用 -u 指定用户 id 时，用户 id 尽量大于500，以免冲突。因为 Linux 操作系统安装后，会默认建立一些用户，所以可能会占用500之内的 id 号。

**Linux 权限机制有以下特点：**
- 系统有一个权限最大的用户，其名称为 root，root 用户属于 root 用户组。
- 系统默认只有 root 权限可以添加和删除用户。
- 添加用户之后，如果没有给用户指定用户组，则系统会为用户添加一个同名的用户组，用户属于该组。
- root 切换到普通用户无需登录，普通用户切换到 root 用户需要登录。
- root 可以给用户赋予和回收某一个文件的读、写、执行的权限。

## 用户操作命令

### 切换用户命令

```bash
su
```

- ```su [用户名]``` 或者 ```su -[用户名]```
- ```su [用户名]``` 和 ```su -[用户名]``` 都可以切换用户，前者类似于临时切换用户，当使用该命令进行切换新用户时，用户配置仍然沿用原来的用户配置，如环境变量、系统变量等。而后者进行切换用户时，环境变量、系统设置全部切换成新用户的用户配置。

### 查看当前登录用户命令

```bash
whoami
```

### 查看当前用户所属分组命令

```bash
groups
```

### 查看用户 UID 和 GID 命令

```bash
id
```

### 添加新用户命令

```bash
useradd
```

取值 | 说明
---|---
-c | 代表 comment 指定一段注释性描述
-d | 指定用户主目录
-g | 指定用户所属的用户组
-G | 指定用户所属的附加组
-u | 指定用户的用户号
缺省 | 直接添加用户

在 Linux 操作系统中添加用户：```useradd 用户名```

在 Linux 操作系统中添加用户并指定用户 UID：```useradd -u```

### 修改用户密码命令

```bash
passwd
```

例如：修改当前用户名 sang 的用户密码：```passwd sang```；在添加用户之后，只有为其设置密码，用户才能登录。


取值 | 说明
---|---
-d | 删除密码，仅有系统管理员才能使用。
-f | 强制执行
-k | 设置只有密码过期后才能更新
-l | 锁着密码
-s | 列出面膜的相关信息，仅有系统管理员才能使用
-u | 解开已上锁的账号


