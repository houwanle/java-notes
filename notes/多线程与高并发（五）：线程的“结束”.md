## 多线程与高并发（五）：线程的“结束”

**面试题：如何优雅的结束一个线程？**
- e.g. 上传一个大文件，正在处理费时的计算，如何优雅的结束这个线程？

### 1.stop方法

- 为什么不建议使用stop方法？
  - 容易产生数据不一致的问题（会释放所有的锁，并且不会做善后的工作）

```java
package com.lele.c_001_00_thread_end;

import com.lele.util.SleepHelper;

/**
 * @author: lele
 * @date: 2021/11/23 7:43
 * @description:
 */
public class T01_Stop {
    public static void main(String[] args) {
        Thread t = new Thread(() -> {
            while (true) {
                System.out.println("go on");
                SleepHelper.sleepSeconds(1);
            }
        });

        t.start();

        SleepHelper.sleepSeconds(5);

        t.stop(); //为什么不建议使用stop方法？容易产生数据不一致的问题；会释放所有的锁，并且不会做善后的工作
    }
}
```

### 2.suspend、resume方法

- 不建议使用，原因与stop方法相同

```java
package com.lele.c_001_00_thread_end;

import com.lele.util.SleepHelper;

/**
 * @author: lele
 * @date: 2021/11/24 7:23
 * @description:
 */
public class T02_Suspend_Resume {

    public static void main(String[] args) {
        Thread t = new Thread(() -> {
            while (true) {
                System.out.println("go on");
                SleepHelper.sleepSeconds(1);
            }
        });

        t.start();

        SleepHelper.sleepSeconds(5);

        t.suspend();  //暂停
        SleepHelper.sleepSeconds(3);
        t.resume();  //恢复
    }
}
```
